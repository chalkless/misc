# Ubuntu setup
'23-6-10に作業

## インストールメディアの作成など
- [Ubuntuのサイト](https://jp.ubuntu.com/)
- ヘッダの右の方にあるダウンロードから
- 「Ubuntu Desktop 22.04.2 LTS」をダウンロード。こちらは安定版。LTSのつかない「Ubuntu Desktop 23.04」は開発版
- ダウンロードすると「ubuntu-22.04.2-desktop-amd64.iso」がダウンロードされる。
  - amd64 ?　と思ったのだが、（ようするに今回はIntel CPUなんだが）、ppc64とかarm64しかないし、ubuntuではこう書くとあったので（実際にうまくいったし）気にせずにダウンロード
- https://virment.com/making-installusb-ubuntu-mac/ を参考に形式変換してインストール用USBスティックを作る（８GBあればいいだろうということになっているようだ）

```
$ hdiutil convert -format UDRW -o ubuntu-22.04.2-desktop-amd64.img ubuntu-22.04.2-desktop-amd64.iso     # iso -> img
$ mv ubuntu-22.04.2-desktop-amd64.img.dmg ubuntu-22.04.2-desktop-amd64.img   # .dmg　が付くので削る
$ diskutil list
　　　...　 　 # USBスティックがどこに認識されているか確認（例：/dev/disk1）
$ diskutil unMountDisk /dev/disk1s1      # ディスクをアンマウントする
$ sudo dd if=ubuntu-22.04.2-desktop-amd64.img of=/dev/disk1s1 bs=1m
```

- しばらくかかる。これはコマンドでやるやり方だが、もっと簡便にやるツールもあるらしい。

## インストール（起動まで）
- USBスティック（インストールメディア）を挿してインストーラー起動
  - 起動しないときはBIOS画面に行ってUSB起動するようにするとか、既存システムが起動してしまうときはBIOSでHDD/SSDより先にUSBを見るようにする
- 「Try or Install Ubuntu」 を選択
- 言語が選べるので日本語にする
- 「Ubuntuをインストール」
- キーボードを選択
- 「通常のインストール」 or　「最小のインストール」：今回はサーバーとしての利用なのでどうせモニタとかつながんし最小で
- インストールの種類
  - ここでパーティションの切り方など訊かれる
  - 「ディスクを削除してUbuntuをインストール」が通常。自分で変えたかったら「その他」から選べる
  - 今回は、SSD+HDD×２という構成なので、ここでどうHDDをマウントするかとか選べる
  - /dev/sda1とかをダブルクリックしたりすると設定ができるようだ
  - のだが、SSDを/ねって先に進もうとすると、EFIシステムパーティションを作れとか言われる。そういえばswap領域も指定せねばならない。。。
  - /homeをHDDにマウントしたかったのだが、システムの部分の割り振りはUbuntuにおまかせすることとして今回は通常で
  - CentOSだと試しにこうやってみたよ、とか出るので、それを元に自分でいじれたんだけどね
- 途中で更新分をインストールしていいかとか、タイムゾーンとか訊かれる
- パソコン名とユーザー情報を入れる：「あなたの名前」は空白。ユーザー名とパスワードはLinuxのユーザー名になるのでそれなりに慎重に。
  - rootのパスワード設定はここではされない。逆にいつまでもされないので、後で明示的に指定する
- インストールメディアをはずして一旦再起動（とメッセージが出る）
- オンラインアカウントとの接続がなんとかとか訊かれるが放っておいていい
- 無事に起動してとりあえず使えるように。これから追加のセッティングをする。








